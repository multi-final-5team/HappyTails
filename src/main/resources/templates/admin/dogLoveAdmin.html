<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{admin/index :: head}">
    <meta charset="UTF-8">
    <title>관리</title>
</head>
<body class="sb-nav-fixed">
<menu th:replace="~{admin/index :: headDiv}"></menu>
<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid px-4">
            <h1 class="mt-4">Tables</h1>
            <div class="card mb-4">
                <div class="card-body">
                    커뮤니티 관리자 페이지 입니다.
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-table me-1"></i>
                    커뮤니티
                </div>
                <div class="card-body">
                    <table id="datatablesSimple">
                        <thead>
                        <tr>
                            <th>게시글 번호</th>
                            <th>제목</th>
                            <th>작성자</th>
                            <th>내용</th>
                            <th>작성일</th>
                            <th>관리</th>
                        </tr>
                        </thead>

                        <tbody>
<!--                        모델 어트리뷰트로 받은 리스트-->
                        <tr th:each="doglove : ${dogloves}">
<!--                            td마다 1개씩 컬럼 담아주면 됨-->
                            <td th:text="${doglove.dogloveNo}"></td>
                            <td>
                                <a th:href="@{/community/doglove/{dogloveNo}(dogloveNo=${doglove.dogloveNo})}">
                                    <div th:if="${dogloveImages != null and dogloveImages.get(doglove.dogloveNo) != null and !dogloveImages.get(doglove.dogloveNo).empty}">
                                        <img th:src="@{/images/L/{file}(file=${dogloveImages.get(doglove.dogloveNo)[0].storedFileName})}" class="card-img-top" alt="대표 이미지">
                                    </div>
                                    <div th:text="${doglove.title}"></div>
                                </a>
                            </td>
                            <td th:text="${doglove.userId}"></td>
                            <td>
                                <p class="card-text" th:text="${#strings.abbreviate(doglove.content, 50)}"></p>
                            </td>
                            <td >
                                <span class="badge bg-secondary" th:text="${#temporals.format(doglove.createTime, 'yyyy-MM-dd')}"></span>
                            </td>
                            <td>
                                <a th:href="@{/doglove/delete/{dogloveNo}(dogloveNo=${doglove.dogloveNo})}" class="btn btn-sm btn-danger" onclick="return confirmDelete();">삭제</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>
</body>
</html>
