
<!--
    이 페이지는 회원의 마이페이지를 표시해 주는 페이지로,
    회원의 프로필 이미지, 이름을 보여주며
    구매 목록, 사업자 등록, 회원정보 수정, 회원탈퇴의 기능을 접근할 수 있게 하는 페이지
-->

<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head">
    <title>마이페이지</title>
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/member/mypage.css">-->
</head>
<body class="container mt-5">
<menu th:replace="fragments/head :: menu"></menu>
<main>

<br>
<br>
<br>

<div class="container">
    <div class="row mt-5">
        <div class="col-md-4 offset-md-4 text-center">
            <img id="profile" src="" alt="profile" class="img-thumbnail" style="width: 150px; height: 150px;">
            <h3 id="name" class="mt-3"></h3>

            <button id="purchase-history" class="btn btn-primary mt-2">구매 목록</button>
            <br>
            <button id="business-signup" class="btn btn-primary mt-2">사업자 등록</button>
            <br>
            <button id="member-info" class="btn btn-primary mt-2">회원정보수정</button>
            <br>
            <button id="delete-account" class="btn btn-danger mt-2">회원탈퇴</button>

        </div>
    </div>
</div>
</main>

<!--
    아래의 스크립트는 마이페이지의 동적 기능을 처리하며,
    페이지를 읽어올 때 현재 사용자 정보를 가져와 표시하고
    각 버튼 클릭 시 이벤트를 처리를 위한 코드
-->

<script>
    $(document).ready(function() {
        $.ajax({
            url: '/member/getCurrentUser',
            method: 'GET',
            success: function(data) {
                // $('#profile-img').attr('src', '/member/profile-img/' + data.profileIMG);
                $('#name').text(data.name);
            }
        });

        // $('#purchase-history').click(function() {
        //     window.location.href = '/member/purchase';
        // });

        // $('#member-info').click(function() {
        //     window.location.href = '/member/memberinfo';
        // });

        // $('#delete-account').click(function() {
        //     if(confirm('계정 삭제를 원하십니까?')) {
        //         $.ajax({
        //             url: '/member/delete',
        //             method: 'POST',
        //             success: function(response) {
        //                 alert('계정 삭제를 성공했습니다.');
        //                 window.location.href = '/member/login';
        //             },
        //             error: function(error) {
        //                 alert('계정 삭제 실패.');
        //             }
        //         });
        //     }
        // });

    });
</script>

</body>
</html>